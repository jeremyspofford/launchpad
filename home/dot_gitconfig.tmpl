[user]
    name = {{ .name }}
    email = {{ .email }}

[core]
    editor = nvim
    excludesfile = ~/.gitignore
    autocrlf = input
    pager = delta

[init]
    defaultBranch = main

[push]
    default = current
    autoSetupRemote = true

[pull]
    rebase = true

[fetch]
    prune = true

[merge]
    conflictstyle = diff3

[diff]
    colorMoved = default

[interactive]
    diffFilter = delta --color-only

[delta]
    navigate = true
    light = false
    side-by-side = true
    line-numbers = true

[alias]
    # Basic shortcuts
    st = status -sb
    co = checkout
    ci = commit
    br = branch
    df = diff
    lg = log --oneline --graph --decorate
    
    # Advanced shortcuts
    unstage = reset HEAD --
    last = log -1 HEAD
    amend = commit --amend --no-edit
    undo = reset --soft HEAD~1
    
    # Branch management
    branches = branch -a
    remotes = remote -v
    cleanup = !git branch --merged | grep -v '\\*\\|main\\|master\\|develop' | xargs -n 1 git branch -d
    
    # Stash shortcuts
    stashes = stash list
    save = stash save
    pop = stash pop
    
    # Log variations
    hist = log --pretty=format:'%h %ad | %s%d [%an]' --graph --date=short
    today = log --since=midnight --oneline
    recent = log --oneline -10
    
    # Work tracking
    standup = log --since=yesterday --author='{{ .email }}' --oneline
    
    # Sync shortcuts
    sync = !git fetch --all && git pull
    pushf = push --force-with-lease

# Conditional includes for different directories
# Work repositories
[includeIf "gitdir:~/work/"]
    path = ~/.gitconfig.work

# Personal projects
[includeIf "gitdir:~/personal/"]
    path = ~/.gitconfig.personal

# Open source contributions
[includeIf "gitdir:~/opensource/"]
    path = ~/.gitconfig.opensource

{{ if .work_email }}
# Work-specific configuration
[includeIf "gitdir:~/work/"]
    path = ~/.gitconfig.work
{{ end }}

# Platform-specific settings
{{ if eq .chezmoi.os "darwin" }}
[credential]
    helper = osxkeychain
{{ else if eq .chezmoi.os "linux" }}
[credential]
    helper = store
{{ end }}

[color]
    ui = true
    
[color "branch"]
    current = yellow reverse
    local = yellow
    remote = green

[color "diff"]
    meta = yellow bold
    frag = magenta bold
    old = red bold
    new = green bold

[color "status"]
    added = green
    changed = yellow
    untracked = cyan